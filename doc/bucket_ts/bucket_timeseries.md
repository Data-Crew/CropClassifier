### Overview

![Overview of bucket_timeseries process](bucket_timeseries_overview.png)

---

### Detailed View

![Detailed step-by-step of bucket_timeseries](bucket_timeseries_detailview.png)

---

### Step-by-Step Logic (Example Walkthrough)

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  
â”‚  Raw Input (N, 15)           â”‚  
â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€  â”‚  
â”‚  [12 bands | NDVI | SCL | day]  â”‚  
â”‚  ...                         â”‚  
â”‚  day = [120, 135, 153, 156, 162, 165, 178, 200]  â† absolute days  
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  
            â”‚  
            â–¼  
ğŸªŸ 1. Temporal Slice (e.g., days_in_series = 30)  
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  
â”‚  Random start_day = 150                              â”‚  
â”‚  Keep only days âˆˆ [150, 180]                         â”‚  
â”‚  â†’ [153, 156, 162, 165, 178]                          â”‚  
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  
            â”‚  
            â–¼  
ğŸ² 2. Sample & Normalize  
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  
â”‚  Random sample â†’ keep up to max N (e.g., 5)â”‚  
â”‚  Normalize days:                          â”‚  
â”‚     [153, 156, 162, 165, 178]              â”‚  
â”‚     â†’ [0, 3, 9, 12, 25]                    â”‚  
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  
            â”‚  
            â–¼  
ğŸ—‚ï¸ 3. Bucket by Time Frame (e.g., days_per_bucket = 10)  
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  
â”‚  Normalized â†’ bucket_idx               â”‚  
â”‚     [0, 3, 9, 12, 25] â†’ [0, 0, 0, 1, 2] â”‚  
â”‚  Keep first per bucket: idxs = [0, 3, 4]â”‚  
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  
            â”‚  
            â–¼  
ğŸ§± 4. Pad to Shape (max_images_per_series = 25)  
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  
â”‚  Output tensor shape = (25, 15)                    â”‚  
â”‚  Fill with:                                        â”‚  
â”‚    bucket 0 â†’ image[0]                             â”‚  
â”‚    bucket 1 â†’ image[3]                             â”‚  
â”‚    bucket 2 â†’ image[4]                             â”‚  
â”‚    all others â†’ [0, 0, ..., 0]                     â”‚  
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  
